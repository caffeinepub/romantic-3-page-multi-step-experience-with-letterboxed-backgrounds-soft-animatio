{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Autoplay background music using provided Soch Na Sake track without a separate play button",
  "requirements": [
    {
      "id": "REQ-5",
      "summary": "Use the provided 'Soch_Na_Sake_FULL....' track as the single runtime background music source and keep the /assets/background-music.mp3 path working.",
      "acceptanceCriteria": [
        "The background audio file used at runtime is the user-provided \"Soch_Na_Sake_FULL....\" track (not a different placeholder).",
        "The app does not request the track from a missing/404 asset URL.",
        "Audio continues looping as configured (loop enabled)."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/background-music.mp3",
          "operation": "modify",
          "description": "Replace the current background-music.mp3 file contents with the user-provided \"Soch Na Sake FULL VIDEO SONG  AIRLIFT  Akshay Kumar, Nimrat Kaur  Arijit Singh, Tulsi Kumar - T-Series.mp3\" audio (so runtime continues using /assets/background-music.mp3 while actually playing the requested track)."
        },
        {
          "path": "frontend/src/components/BackgroundAudioProvider.tsx",
          "operation": "modify",
          "description": "Ensure the runtime audio source remains '/assets/background-music.mp3' and add a small runtime check/log of the resolved audio URL to confirm it points to the expected asset (no 404)."
        },
        {
          "path": "frontend/README-assets.md",
          "operation": "modify",
          "description": "Update background music documentation to state that the app uses /assets/background-music.mp3 and that this file should contain the 'Soch_Na_Sake_FULL....' track as the source-of-truth."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Autoplay on app load and retry playback on the existing 'Enter the Website' click (no dedicated Play Music CTA under normal autoplay-gesture rules).",
      "acceptanceCriteria": [
        "On initial page load, the app attempts to autoplay the background music.",
        "When the user clicks \"Enter the Website\", the app triggers a play attempt so music starts immediately after entering on browsers that require a user gesture.",
        "The user is not required to press a separate \"Play Music\" button to start background music under normal browser autoplay-gesture rules.",
        "If autoplay is still blocked by the browser, the app remains usable and does not crash (fallback behavior may still appear as a last resort)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BackgroundAudioProvider.tsx",
          "operation": "modify",
          "description": "Refine autoplay behavior: keep the initial autoplay attempt on mount, and adjust fallback UI logic so a dedicated 'Play Music' button is not shown immediately on the first blocked attempt (only allow last-resort fallback after a user-gesture retry still fails)."
        },
        {
          "path": "frontend/src/components/BackgroundAudioProvider.tsx",
          "operation": "modify",
          "description": "Expose a user-gesture play method via the existing context (e.g., a 'playFromGesture' function or equivalent) that performs a play attempt even if the initial autoplay was blocked."
        },
        {
          "path": "frontend/src/components/EnterWebsiteGate.tsx",
          "operation": "modify",
          "description": "Hook into the existing \"Enter the Website\" click to trigger the background music play attempt (call the BackgroundAudioProvider context play method before/while setting hasEntered=true) so playback starts immediately after entering on autoplay-restricted browsers."
        }
      ]
    },
    {
      "id": "REQ-7",
      "summary": "Add minimal, actionable runtime diagnostics around audio play attempts and ensure the provider-managed audio instance persists across route changes.",
      "acceptanceCriteria": [
        "If audio fails to start, the console logs clearly indicate whether the failure is due to autoplay policy, missing asset (404), unsupported format, or another play() error.",
        "Navigating between routes (`/` → `/proposal` → `/final`) does not restart the track from the beginning (single provider-managed audio instance remains active)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BackgroundAudioProvider.tsx",
          "operation": "modify",
          "description": "Add targeted console diagnostics: log the resolved audio.src (and/or currentSrc when available) and capture/log the full play() rejection (name/message) for both the initial autoplay attempt and the gesture-triggered attempt to distinguish autoplay-policy blocks vs missing asset vs other errors."
        },
        {
          "path": "frontend/src/components/BackgroundAudioProvider.tsx",
          "operation": "modify",
          "description": "Harden audio element lifecycle: ensure the audio element is created exactly once in the provider (already wrapped at App level) and is not recreated/restarted on route navigation; keep cleanup only on provider unmount."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Verify BackgroundAudioProvider remains mounted above RouterProvider (and not conditionally remounted) so route changes do not restart audio; adjust only if needed."
        }
      ]
    },
    {
      "id": "REQ-8",
      "summary": "Avoid shipping duplicate audio variants by keeping only one background music file in frontend/public/assets used at runtime.",
      "acceptanceCriteria": [
        "There is a single source-of-truth background music file used by the app at runtime (no duplicate copies referenced or shipped).",
        "Build output does not include multiple large redundant MP3 variants for the same track."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/Soch Na Sake FULL VIDEO SONG  AIRLIFT  Akshay Kumar, Nimrat Kaur  Arijit Singh, Tulsi Kumar - T-Series.mp3",
          "operation": "delete",
          "description": "Delete the original long-filename track after its contents have been consolidated into frontend/public/assets/background-music.mp3, to ensure only one runtime audio file is shipped."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k (1).mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k-1.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k-2.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k-3.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k-4.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k-5.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k-6.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        },
        {
          "path": "frontend/public/assets/Soch_Na_Sake_FULL_VIDEO_SONG_AIRLIFT_Akshay_Kumar,_Nimrat_Kaur_Arijit_Singh,_Tulsi_Kumar_128k.mp3",
          "operation": "delete",
          "description": "Remove redundant duplicate variant so only one runtime background music file remains in frontend/public/assets/."
        }
      ]
    }
  ]
}